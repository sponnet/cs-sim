(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(47),o=t.n(l),r=(t(56),t(4)),i=t(5),c=t(7),m=t(6),p=t(8),u=(t(57),t(58),t(31),function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this))).state={globalparams:e.globalparams},t}return Object(p.a)(a,e),Object(i.a)(a,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("section",{className:"info-tiles"},s.a.createElement("div",{className:"tile is-ancestor has-text-centered"},s.a.createElement("div",{className:"tile is-parent"},s.a.createElement("article",{className:"tile is-child box"},s.a.createElement("p",{className:"title"},"Alpha ",this.state.globalparams.alpha/100),s.a.createElement("p",{className:"subtitle"},s.a.createElement("input",{className:"slider is-fullwidth is-large is-danger is-circle",step:"1",min:"0",max:"100",value:this.state.globalparams.alpha,type:"range",onChange:function(a){e.setState({globalparams:Object.assign({},e.state.globalparams,{alpha:a.target.value})},function(){e.props.onChange&&e.props.onChange(e.state.globalparams)})}}))),s.a.createElement("article",{className:"tile is-child box"},s.a.createElement("p",{className:"title"},"Total time of sim ",this.state.globalparams.totaltime),s.a.createElement("p",{className:"subtitle"},s.a.createElement("input",{className:"slider is-fullwidth is-large is-danger is-circle",step:"1",min:"0",max:"1000",value:this.state.globalparams.totaltime,type:"range",onChange:function(a){e.setState({globalparams:Object.assign({},e.state.globalparams,{totaltime:a.target.value})},function(){e.props.onChange&&e.props.onChange(e.state.globalparams)})}})))))))}}]),a}(n.Component)),h=t(48),d=t(50),b=t.n(d),g=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this))).state={globalparams:e.globalparams,proposal:e.proposal},t}return Object(p.a)(a,e),Object(i.a)(a,[{key:"componentWillMount",value:function(){this.recalc()}},{key:"componentWillReceiveProps",value:function(e){this.setState({globalparams:e.globalparams}),this.recalc()}},{key:"makecolor",value:function(e){var a=251*e%255,t=43*e%255;return"rgba(".concat(139*e%255,",").concat(a,",").concat(t,",0.3)")}},{key:"recalc",value:function(){for(var e=this,a=[],t=0;t<this.state.globalparams.totaltime;t++)a.push(t);for(var n=[],s=this.state.proposal.convictions.map(function(a,t){for(var s=e.state.globalparams.alpha/100,l=0,o=l,r=0,i=[],c=0,m=0,p=0;p<e.state.globalparams.totaltime;p++){if(o=b.a.getConviction(s,10,l,r,c),i.push(o),a.stakes&&a.stakes.length>m&&a.stakes[m].time<=p){var u=a.stakes[m];m++,r=u.tokensstaked,c=0,l=o,n.push({t:p,desc:"".concat(a.name," changes stake to ").concat(u.tokensstaked)})}c++}return{label:a.name,fill:!1,borderColor:e.makecolor(t),data:i}}),l=[],o=function(e){var a=s.reduce(function(a,t){return a+t.data[e]},0);l.push(a)},r=0;r<this.state.globalparams.totaltime;r++)o(r);s.push({label:"total",borderColor:"rgba(75,192,192,1)",data:l}),n.sort(function(e,a){return e.t-a.t}),this.setState({plot:{labels:a,datasets:s},timeline:n})}},{key:"render",value:function(){var e=this.state.timeline.map(function(e,a){return s.a.createElement("li",{key:a},e.t," : ",e.desc)});return s.a.createElement("div",{className:"container"},s.a.createElement("section",{className:"hero is-info welcome is-small"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"title"},"Proposal : ",this.state.proposal.name)))),s.a.createElement("div",{className:"card"},s.a.createElement("header",{className:"card-header"},s.a.createElement("p",{className:"card-header-title"},"Conviction chart")),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},this.state.plot&&s.a.createElement(h.a,{data:this.state.plot}),s.a.createElement("ol",null,e)))))}}]),a}(n.Component),f=(n.Component,function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this))).state={globalparams:{alpha:90,totaltime:100},proposals:[{timecreated:0,id:1,value:1e3,name:"Spend 1000 xDAI on X",convictions:[{name:"Griff",stakes:[{time:0,tokensstaked:1e3},{time:50,tokensstaked:0}]},{name:"Jeff",stakes:[{time:30,tokensstaked:1e3},{time:80,tokensstaked:7e3}]}]}]},t}return Object(p.a)(a,e),Object(i.a)(a,[{key:"timeChanged",value:function(e){console.log("app: time changed")}},{key:"render",value:function(){var e=this,a=this.state.proposals.map(function(a,t){return s.a.createElement("div",{key:t,className:"tile is-ancestor has-text-centered"},s.a.createElement("div",{className:"tile is-parent"},s.a.createElement("article",{className:"tile is-child box"},s.a.createElement(g,{globalparams:e.state.globalparams,proposal:a}),";")))});return s.a.createElement("div",{className:"App"},s.a.createElement("section",{className:"info-tiles"},s.a.createElement(u,{globalparams:this.state.globalparams,onChange:function(a){e.setState({globalparams:a})}})),s.a.createElement("section",{className:"info-tiles"},a))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},31:function(e,a,t){},50:function(e,a){e.exports={getConviction:function(e,a,t,n,s){var l=function(e){return Math.floor(e)},o=t*e+n,r=l(e*a),i=l(Math.pow(a,s)),c=l(Math.pow(r,s)),m=l(c*t),p=l(n*a*l(i-c))/l(a-r);l((m+p)/i);return o}}},51:function(e,a,t){e.exports=t(153)},56:function(e,a,t){},57:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"}},[[51,1,2]]]);
//# sourceMappingURL=main.4cfd2259.chunk.js.map